spring.application.name=MoraPack

# Allow bean definition overriding (fixes duplicate repository issue)
spring.main.allow-bean-definition-overriding=true

# Server configuration
server.port=8080

# Timeouts configuration for long-running algorithm (ALNS: 30-90 minutes)
# Connection timeout: time to establish connection
server.tomcat.connection-timeout=600000
# Keep-alive timeout: how long to keep connection alive
server.tomcat.keep-alive-timeout=600000
# Max keep-alive requests
server.tomcat.max-keep-alive-requests=100

# Spring MVC async request timeout (0 = no timeout)
spring.mvc.async.request-timeout=0

# Increase max HTTP header size for large responses
server.max-http-header-size=16KB

# ========================================
# DATABASE CONNECTION & JPA CONFIGURATION
# ========================================

# Hibernate batch insert optimization (CRITICAL for bulk operations)
# Enables batch processing for INSERT/UPDATE operations
spring.jpa.properties.hibernate.jdbc.batch_size=2000

# Order inserts and updates for better batching performance
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# Enable batch versioned data
spring.jpa.properties.hibernate.batch_versioned_data=true

# Use new ID generator mappings (required for SEQUENCE-based batching)
spring.jpa.properties.hibernate.id.new_generator_mappings=true

# Disable auto-commit for batch operations
spring.jpa.properties.hibernate.connection.autocommit=false

# Performance tuning
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true
spring.jpa.properties.hibernate.jdbc.fetch_size=50

# Show SQL for debugging batch operations (disable in production)
# Uncomment to verify batching is working:
# spring.jpa.show-sql=true
# spring.jpa.properties.hibernate.format_sql=true
# logging.level.org.hibernate.SQL=DEBUG
# logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Hibernate DDL auto-generation
# Options: none, validate, update, create, create-drop
# - update: Automatically adds missing columns/tables (RECOMMENDED for development)
# - validate: Only validates schema, doesn't modify (RECOMMENDED for production)
spring.jpa.hibernate.ddl-auto=update